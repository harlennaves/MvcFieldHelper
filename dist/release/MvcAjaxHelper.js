var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mvc;!function(e){!function(e){e.Date="DateFormatter"}(e.FieldFormatterType||(e.FieldFormatterType={}))}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){return function(e){null!=e.type&&(this.type=e.type),null!=e.format&&(this.format=e.format)}}();e.FieldFormatModel=t}(Mvc||(Mvc={}));var Mvc;Mvc||(Mvc={});var Mvc;Mvc||(Mvc={});var Mvc;!function(e){!function(e){e.Input="InputFieldReader",e.CheckBox="CheckBoxFieldReader",e.KendoDropDown="KendoDropDownListFieldReader",e.KendoDatePicker="KendoDatePickerFieldReader",e.KendoNumericTextBox="KendoNumericTextBoxFieldReader"}(e.FieldReaderType||(e.FieldReaderType={}))}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){return function(t){if(this.fieldId=t.fieldId,this.modelProperty=t.modelProperty,this.modelType=t.modelType,this.reader=t.reader,null==this.modelProperty)throw new Error("modelProperty cannot be null");null==this.fieldId&&(this.fieldId=this.modelProperty),null==this.modelType&&(this.modelType="string"),null==this.reader&&(this.reader=e.FieldReaderType.Input),null!=t.formatter&&(this.formatter=new e.FieldFormatModel({type:t.formatter}))}}();e.FieldMappingModel=t}(Mvc||(Mvc={}));var Mvc;!function(Mvc){var FieldHelper=function(){function FieldHelper(e){this.Model=e,null==this.Model&&(this.Model={}),this.mapping=[],this.readers={},this.formatters={},this.initializeMapping()}return FieldHelper.prototype.initializeMapping=function(){var e=$("[data-Property]");if(null!=e&&0!=e.length)for(var t=0;t<e.length;t++){var r=e[t],n=r.attributes["data-property"],o=r.attributes["data-reader"],i=r.attributes["data-formatter"];this.mapping.push(new Mvc.FieldMappingModel({fieldId:r.id,modelProperty:null==n?r.id:n.value,reader:null==o?null:Mvc.FieldReaderType[o.value],formatter:null==i?null:i.value}))}},FieldHelper.prototype.getFieldReader=function(type){return null==this.readers[type.toString()]&&(this.readers[type.toString()]=eval("new Mvc."+type.toString()+"()")),this.readers[type.toString()]},FieldHelper.prototype.getFieldFormatter=function(format){if(null==format||null==format.type)return null;var typeName=format.type.toString();return null==this.formatters[typeName]&&(this.formatters[typeName]=eval("new Mvc."+Mvc.FieldFormatterType[typeName]+"()")),this.formatters[typeName]},FieldHelper.prototype.setModel=function(){for(var e=this.mapping.length,t=0;t<e;t++){var r=this.mapping[t];this.getFieldReader(r.reader).setModelValue(r,this.Model,this.getFieldFormatter(r.formatter))}},FieldHelper.prototype.getModel=function(){for(var e=this.mapping.length,t=0;t<e;t++){var r=this.mapping[t];this.getFieldReader(r.reader).getModelValue(r,this.Model,this.getFieldFormatter(r.formatter))}},FieldHelper.prototype.clearModel=function(){for(var e=this.mapping.length,t=0;t<e;t++){var r=this.mapping[t];this.Model[r.modelProperty]=""}this.getModel()},FieldHelper}();Mvc.FieldHelper=FieldHelper}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){function e(){this.defaultFormat="dd/mm/yyyy"}return e.prototype.getDate=function(e){if(-1!=e.indexOf("Date"))return new Date(parseFloat(/Date\(([^)]+)\)/.exec(e)[1]));if(-1!=e.indexOf("/")){var t=e.split("/");return new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0]))}return null},e.prototype.getValue=function(e){return this.getDate(e)},e.prototype.format=function(e){if(null==e)return"";var t;return null!=(t=e instanceof Date?e:this.getDate(e.toString()))&&t instanceof Date?t.format(this.defaultFormat):""},e}();e.DateFormatter=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){function e(){}return e.prototype.getModelValue=function(e,t,r){var n=$("#"+e.fieldId);null!=n&&null!=t[e.modelProperty]&&n.prop("checked",t[e.modelProperty])},e.prototype.setModelValue=function(e,t,r){var n=$("#"+e.fieldId);null!=n&&(t[e.modelProperty]=n.prop("checked"))},e}();e.CheckBoxFieldReader=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){function e(){}return e.prototype.getModelValue=function(e,t,r){var n=$("#"+e.fieldId);if(null!=n&&null!=t[e.modelProperty]){var o=t[e.modelProperty];n.val(null==r?o:r.format(o))}},e.prototype.setModelValue=function(e,t,r){var n=$("#"+e.fieldId);null!=n&&(t[e.modelProperty]=null==r?n.val():r.getValue(n.val()))},e}();e.InputFieldReader=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(){function e(e){this.componentName=e}return e.prototype.getModelValue=function(e,t,r){var n=$("#"+e.fieldId);if(null!=n){var o=n.data(this.componentName);if(null!=o){var i=t[e.modelProperty];null!=r&&(i=r.format(i)),o.value(i)}}},e.prototype.setModelValue=function(e,t,r){var n=$("#"+e.fieldId);if(null!=n){var o=n.data(this.componentName);null!=o&&(t[e.modelProperty]=o.value())}},e}();e.KendoFieldReaderBase=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(e){function t(){return e.call(this,"kendoDatePicker")||this}return __extends(t,e),t}(e.KendoFieldReaderBase);e.KendoDatePickerFieldReader=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(e){function t(){return e.call(this,"kendoDropDownList")||this}return __extends(t,e),t}(e.KendoFieldReaderBase);e.KendoDropDownListFieldReader=t}(Mvc||(Mvc={}));var Mvc;!function(e){var t=function(e){function t(){return e.call(this,"kendoNumericTextBox")||this}return __extends(t,e),t}(e.KendoFieldReaderBase);e.KendoNumericTextBoxFieldReader=t}(Mvc||(Mvc={}));